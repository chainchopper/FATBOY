<div class="suggestions-container">
  
  <div *ngIf="conflicts.length > 0" class="conflicts-section">
    <h3>‚ö†Ô∏è Preference Conflicts Found</h3>
    <p>Some items on your lists now conflict with your updated preferences.</p>
    <div class="conflicts-grid">
      <div *ngFor="let conflict of conflicts" class="conflict-card">
        <h4>{{ conflict.product.name }}</h4>
        <p class="conflict-details">
          On your <strong>{{ conflict.listType }}</strong>, contains <strong>{{ conflict.conflictingIngredient }}</strong>.
        </p>
        <button (click)="resolveConflict(conflict)" class="resolve-btn">Remove from List</button>
      </div>
    </div>
  </div>

  <h2>Product Suggestions</h2>
  <p>Based on your preferences and scanning history, here are some products you might like:</p>
  
  <div *ngIf="isLoading && suggestions.length === 0" class="loading">
    <p>ü§ñ Analyzing your preferences...</p>
  </div>
  
  <div *ngIf="!isLoading && suggestions.length === 0 && conflicts.length === 0" class="empty-state">
    <p>Scan more products to get personalized suggestions!</p>
  </div>
  
  <div *ngIf="!isLoading && suggestions.length > 0" class="suggestions-grid">
    <div *ngFor="let suggestion of suggestions" class="suggestion-card">
      <div class="similarity-badge">{{suggestion.similarity}}% match</div>
      
      <div class="suggestion-info">
        <h3>{{suggestion.product.name}}</h3>
        <p class="brand">{{suggestion.product.brand}}</p>
        
        <div class="reason">
          <span class="reason-icon">üí°</span>
          <p>{{suggestion.reason}}</p>
        </div>

        <div class="product-categories">
          <span *ngFor="let category of suggestion.product.categories.slice(0, 3)" class="category-tag">
            {{getCategoryIcon(category)}} {{category}}
          </span>
        </div>
        
        <div class="ingredient-preview">
          <p><strong>Ingredients:</strong> {{suggestion.product.ingredients.slice(0, 3).join(', ')}}...</p>
        </div>
      </div>
      
      <button (click)="saveSuggestion(suggestion.product)" class="save-btn">Add to Shopping List</button>
    </div>
  </div>
</div>