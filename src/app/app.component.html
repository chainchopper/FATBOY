<nav class="main-nav">
  <div class="logo-container" (click)="goToHome()">
    <img src="assets/logo.png" alt="Fat Boy Time Logo" class="logo-image">
    <div class="app-title">Fat Boy Time</div>
  </div>
  <div class="nav-actions">
    <button class="hamburger-menu" (click)="toggleMenu()" [class.open]="isMenuOpen" aria-label="Toggle menu">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </button>
  </div>
</nav>

<div class="nav-overlay" [class.open]="isMenuOpen" (click)="closeMenu()">
  <div class="nav-menu" [class.open]="isMenuOpen" (click)="$event.stopPropagation()">
    <button class="close-menu-btn" (click)="closeMenu()">×</button>
    <a routerLink="/scanner" routerLinkActive="active" (click)="closeMenu()">📸 Unified Scan</a>
    <a routerLink="/console" routerLinkActive="active" (click)="closeMenu()">🤖 Agent Console</a>
    <a routerLink="/food-diary" routerLinkActive="active" (click)="closeMenu()">🥗 Food Diary</a>
    <a routerLink="/saved" routerLinkActive="active" (click)="closeMenu()">❤️ Saved</a>
    <a routerLink="/history" routerLinkActive="active" (click)="closeMenu()">📖 History</a>
    <a routerLink="/shopping-list" routerLinkActive="active" (click)="closeMenu()">🛒 Shopping List</a>
    <a routerLink="/achievements" routerLinkActive="active" (click)="closeMenu()">🏆 Achievements</a>
    <a routerLink="/leaderboard" routerLinkActive="active" (click)="closeMenu()">🏅 Leaderboard</a>
    <a routerLink="/friends" routerLinkActive="active" (click)="closeMenu()">🫂 Friends</a>
    <a routerLink="/suggestions" routerLinkActive="active" (click)="closeMenu()">💡 Suggestions</a>
    <a routerLink="/community" routerLinkActive="active" (click)="closeMenu()">🤝 Community</a>
    <a routerLink="/preferences" routerLinkActive="active" (click)="closeMenu()">⚙️ Preferences</a>
    <hr class="nav-divider">
    <a routerLink="/profile" routerLinkActive="active" (click)="closeMenu()">👤 Profile</a>
    <ng-container *ngIf="(currentUser$ | async) as user; else loginLink">
      <a (click)="signOut()" class="logout-link">👋 Logout ({{ (displayName$ | async) || user.email }})</a>
    </ng-container>
    <ng-template #loginLink>
      <a routerLink="/login" routerLinkActive="active" (click)="closeMenu()">👤 Login</a>
    </ng-template>
  </div>
</div>

<!-- Floating Action Button (FAB) -->
<button class="fab-button" (click)="toggleFabMenu()" [class.open]="isFabMenuOpen">
  <span class="plus-icon" [class.rotate]="isFabMenuOpen">+</span>
</button>

<!-- FAB Action Sheet -->
<div class="fab-action-sheet" [class.open]="isFabMenuOpen" (click)="$event.stopPropagation()">
  <button class="fab-action-item" (click)="goToScanner()">
    📸 Scan items using your camera
  </button>
  <button class="fab-action-item" (click)="goToManualEntry()">
    ✍️ Manually enter items to save to your lists
  </button>
</div>

<main>
  <router-outlet></router-outlet>
</main>

<app-add-to-list-modal></app-add-to-list-modal>