<div class="modal-overlay" [class.open]="(display$ | async) === 'open'" (click)="close()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="close()">Ã—</button>
    
    <div *ngIf="product$ | async as product">
      <h3>Add "{{ product.name }}" to a list</h3>
      
      <div *ngIf="!showMealOptions">
        <button class="modal-action-btn" (click)="addToShoppingList()">
          <span class="icon">ğŸ›’</span> Add to Shopping List
        </button>
        <button class="modal-action-btn" (click)="saveToApproved()">
          <span class="icon">â¤ï¸</span> Save to Approved
        </button>
        <button class="modal-action-btn" (click)="addToAvoidList()">
          <span class="icon">ğŸš«</span> Add to Avoided
        </button>
        <button class="modal-action-btn" (click)="toggleMealOptions()">
          <span class="icon">ğŸ¥—</span> Add to Food Diary
        </button>
      </div>

      <div *ngIf="showMealOptions">
        <h4>Which meal?</h4>
        <button class="modal-action-btn" (click)="addToDiary('Breakfast')">ğŸ³ Breakfast</button>
        <button class="modal-action-btn" (click)="addToDiary('Lunch')">ğŸ¥— Lunch</button>
        <button class="modal-action-btn" (click)="addToDiary('Dinner')">ğŸ² Dinner</button>
        <button class="modal-action-btn" (click)="addToDiary('Snack')">ğŸ Snack</button>
        <button class="modal-action-btn" (click)="addToDiary('Drinks')">ğŸ¥¤ Drinks</button>
        <button class="modal-action-btn back-btn" (click)="toggleMealOptions()">â† Back</button>
      </div>
    </div>
  </div>
</div>